{
  "roadmap_version": "1.0.2",
  "project": "maatify/rate-limiter",
  "note": "Roadmap updated to insert a dedicated API Freeze & Stability Lock phase before all observability, logging, and admin features. This guarantees long-term backward compatibility starting from version 1.1.0.",
  "phases": [
    {
      "id": "phase1",
      "title": "Environment Setup",
      "version": "0.1.0",
      "status": "completed",
      "summary": "Initial project bootstrap, Composer setup, environment variables, and basic CI wiring.",
      "tasks": [
        "Create GitHub repository maatify/rate-limiter",
        "Initialize Composer project and dependencies",
        "Add .env.example for Redis, Mongo, MySQL configs",
        "Enable local Redis, MongoDB, MySQL connectivity",
        "Add initial GitHub Actions for PHPUnit (local mode)",
        "Setup development branches (main, develop, feature/*)"
      ],
      "tests": [
        "Bootstrap environment validation",
        "Composer autoload sanity check"
      ],
      "outputs": [
        "composer.json",
        ".env.example",
        ".github/workflows/phpunit.yml"
      ],
      "architecture": [
        "Local-first development model",
        "CI-first validation flow"
      ]
    },
    {
      "id": "phase2",
      "title": "Core Architecture",
      "version": "0.2.0",
      "status": "completed",
      "summary": "Contracts, enums, DTOs, and main configuration layer.",
      "tasks": [
        "Create RateLimiterInterface",
        "Implement RateLimitActionEnum and PlatformEnum",
        "Build RateLimitConfig loader",
        "Add DTO: RateLimitStatusDTO",
        "Add TooManyRequestsException class"
      ],
      "tests": [
        "DTO serialization tests",
        "Config loader tests",
        "Enum contract compliance tests"
      ],
      "outputs": [
        "RateLimiterInterface.php",
        "RateLimitConfig.php",
        "RateLimitStatusDTO.php",
        "TooManyRequestsException.php"
      ],
      "architecture": [
        "Contract-first design",
        "Strict DTO boundary"
      ]
    },
    {
      "id": "phase3",
      "title": "Storage Drivers",
      "version": "0.3.0",
      "status": "completed",
      "summary": "Full Redis, MongoDB, and MySQL drivers with TTL-based rate enforcement.",
      "tasks": [
        "Implement RedisRateLimiter (INCR + EXPIRE)",
        "Implement MongoRateLimiter (TTL Index + expires_at)",
        "Implement MySQLRateLimiter (table ip_rate_limits)",
        "Add unit tests for each driver",
        "Add cleanup cron for MySQL expired records"
      ],
      "tests": [
        "RedisRateLimiterTest",
        "MongoRateLimiterTest",
        "MySQLRateLimiterTest"
      ],
      "outputs": [
        "RedisRateLimiter.php",
        "MongoRateLimiter.php",
        "MySQLRateLimiter.php"
      ],
      "depends_on": ["phase2"],
      "architecture": [
        "Driver-per-storage strategy",
        "TTL-based window enforcement"
      ]
    },
    {
      "id": "phase4",
      "title": "Resolver & Enum Contracts Refactor",
      "version": "0.4.0",
      "status": "completed",
      "summary": "Dynamic driver resolution with interface-based enums and PSR middleware support.",
      "tasks": [
        "Add RateLimitActionInterface and PlatformInterface",
        "Update enums to implement contracts",
        "Create RateLimiterResolver",
        "Build RateLimitHeadersMiddleware (PSR-15)",
        "Integrate with Slim Framework",
        "Integrate with Laravel middleware"
      ],
      "tests": [
        "Resolver routing tests",
        "Middleware invocation tests"
      ],
      "outputs": [
        "RateLimiterResolver.php",
        "RateLimitHeadersMiddleware.php",
        "Enum contract interfaces"
      ],
      "depends_on": ["phase3"],
      "architecture": [
        "Open/Closed enum design",
        "Resolver-based driver routing"
      ]
    },
    {
      "id": "phase5",
      "title": "Exponential Backoff & Global Limit",
      "version": "1.0.0",
      "status": "completed",
      "summary": "Adaptive backoff delays and global IP-based rate limiting.",
      "tasks": [
        "Add exponential backoff algorithm (2â¿ logic)",
        "Extend RateLimitStatusDTO with backoffSeconds and nextAllowedAt",
        "Introduce global IP limiter rate:ip:{ip}",
        "Add .env keys: GLOBAL_RATE_LIMIT, GLOBAL_RATE_WINDOW, BACKOFF_BASE, BACKOFF_MAX",
        "Enhance TooManyRequestsException with retry metadata",
        "Update resolver and drivers to support backoff-aware responses"
      ],
      "tests": [
        "BackoffTest",
        "GlobalIpLimiterTest"
      ],
      "outputs": [
        "Backoff logic in all drivers",
        "Enhanced RateLimitStatusDTO",
        "Updated TooManyRequestsException"
      ],
      "depends_on": ["phase4"],
      "architecture": [
        "Adaptive delay escalation",
        "Global limiter overlay"
      ]
    },
    {
      "id": "phase6",
      "title": "API Freeze & Stability Lock",
      "version": "1.1.0",
      "status": "pending",
      "summary": "Full audit and permanent freeze of all public core APIs to guarantee long-term backward compatibility.",
      "tasks": [
        "Audit RateLimiterInterface methods",
        "Audit attempt() and status() signatures",
        "Audit RateLimitStatusDTO structure",
        "Audit TooManyRequestsException contract",
        "Audit Resolver public behavior",
        "Lock public method signatures",
        "Generate final api-map.json",
        "Generate api-freeze-report.md",
        "Mark Core API as Frozen in README"
      ],
      "outputs": [
        "Final frozen api-map.json",
        "api-freeze-report.md",
        "Frozen core API declaration in README"
      ],
      "depends_on": ["phase5"]
    },
    {
      "id": "phase7",
      "title": "Core Logging Layer",
      "version": "1.2.0",
      "status": "pending",
      "summary": "Introduce internal structured logging for all rate limit operations using PSR-3 without any external integrations.",
      "tasks": [
        "Integrate PSR-3 LoggerInterface into RateLimiter core",
        "Log rate_limit_hit events",
        "Log rate_limit_block events",
        "Log backoff_triggered events",
        "Implement JSON structured log formatter",
        "Add configurable log levels via .env"
      ],
      "tests": [
        "LoggerInjectionTest",
        "StructuredLogFormatTest"
      ],
      "outputs": [
        "Internal logging system",
        "Structured JSON logs for rate-limit activity"
      ],
      "depends_on": ["phase6"],
      "architecture": [
        "Pure infrastructure logging",
        "No external side effects",
        "PSR-3 compliant"
      ]
    },
    {
      "id": "phase8",
      "title": "Domain Event System",
      "version": "1.3.0",
      "status": "pending",
      "summary": "Introduce domain-level events to decouple rate limiter core logic from any external integrations.",
      "tasks": [
        "Create RateLimiterEvent base class",
        "Create HitEvent, BlockEvent, ResetEvent, BackoffEvent",
        "Implement synchronous EventDispatcher",
        "Dispatch events from Core after logging",
        "Allow multiple subscribers per event"
      ],
      "tests": [
        "EventDispatchTest",
        "MultipleSubscriberTest"
      ],
      "outputs": [
        "Domain event system",
        "Event dispatcher",
        "Event base contracts"
      ],
      "depends_on": ["phase7"],
      "architecture": [
        "Domain Events Pattern",
        "Decoupled Core Logic",
        "Subscriber-based propagation"
      ]
    },
    {
      "id": "phase9",
      "title": "Alerts & External Integrations",
      "version": "1.4.0",
      "status": "pending",
      "summary": "Deliver rate limit events to external systems such as Telegram and Email through decoupled adapters.",
      "tasks": [
        "Implement TelegramAlertAdapter",
        "Implement EmailAlertAdapter",
        "Create RateLimitAlertSubscriber",
        "Attach subscriber to event dispatcher",
        "Implement throttling for outgoing alerts",
        "Add .env config for alert channels"
      ],
      "tests": [
        "TelegramAlertAdapterTest",
        "EmailAlertAdapterTest",
        "AlertThrottlingTest"
      ],
      "outputs": [
        "Telegram alert integration",
        "Email alert integration",
        "Alert subscriber system"
      ],
      "depends_on": ["phase8"],
      "architecture": [
        "Adapter pattern",
        "Event subscriber model",
        "External integration isolation"
      ]
    },
    {
      "id": "phase10",
      "title": "Monitoring & Observability",
      "version": "1.5.0",
      "status": "pending",
      "summary": "Expose health, statistics, and Prometheus-compatible metrics for operational visibility.",
      "tasks": [
        "Expose /admin/rate-limit/health endpoint",
        "Expose /admin/rate-limit/stats endpoint",
        "Expose /admin/rate-limit/metrics (Prometheus)",
        "Add internal metrics counters for hit/block/backoff/reset",
        "Enable Grafana dashboard integration"
      ],
      "tests": [
        "HealthEndpointTest",
        "MetricsEndpointTest"
      ],
      "outputs": [
        "Prometheus metrics endpoint",
        "Grafana dashboard"
      ],
      "depends_on": ["phase9"],
      "architecture": [
        "Pull-based metrics model",
        "Observability-first design"
      ]
    },
    {
      "id": "phase11",
      "title": "Reset Service & Admin Dashboard",
      "version": "1.6.0",
      "status": "pending",
      "summary": "Administrative control panel and reset services for live system management.",
      "tasks": [
        "Implement resetAll() in all drivers",
        "Implement resetByIp() in all drivers",
        "Add REST endpoint /admin/rate-limit/reset",
        "Develop RateLimiterDashboard.php",
        "Add Reset / Block / Unblock actions",
        "Add audit logging for admin actions"
      ],
      "tests": [
        "AdminResetApiTest",
        "AuditLogTest"
      ],
      "outputs": [
        "Admin Reset API",
        "Dashboard UI",
        "Audit logs"
      ],
      "depends_on": ["phase10"],
      "architecture": [
        "Service-based reset design",
        "Admin boundary isolation"
      ]
    },
    {
      "id": "phase12",
      "title": "Stress Testing & Quality Assurance",
      "version": "1.7.0",
      "status": "pending",
      "summary": "High-load testing, memory profiling, and production hardening.",
      "tasks": [
        "Achieve PHPUnit coverage > 85%",
        "Stress test Redis under 10k req/sec",
        "Stress test Mongo & MySQL consistency",
        "Memory leak detection",
        "CPU profiling under burst traffic"
      ],
      "tests": [
        "HighLoadRateTest",
        "MemoryLeakTest"
      ],
      "outputs": [
        "Stress test reports",
        "Performance benchmarks",
        "Stability certification"
      ],
      "depends_on": ["phase11"]
    },
    {
      "id": "phase13",
      "title": "Public Documentation & Stable Release",
      "version": "1.8.0",
      "status": "pending",
      "summary": "Finalize documentation, tag stable release, and publish to Packagist.",
      "tasks": [
        "Finalize README.md",
        "Finalize CONTRIBUTING.md",
        "Finalize CHANGELOG.md",
        "Create GitHub Pages / Wiki",
        "Tag stable release v1.0.0",
        "Publish on Packagist"
      ],
      "tests": [],
      "outputs": [
        "Public documentation",
        "Stable Packagist release"
      ],
      "depends_on": ["phase12"]
    }
  ]
}
